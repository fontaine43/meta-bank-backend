<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Account Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .dashboard { max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
    h2 { text-align: center; }
    .field { margin: 10px 0; }
    .label { font-weight: bold; }
  </style>
</head>
<body>
  <div class="dashboard">
    <h2>Account Dashboard</h2>
    <div id="accountData"></div>
  </div>

  <script>
    // Get token from localStorage (saved during login.html)
    const token = localStorage.getItem('authToken');

    if (!token) {
      document.getElementById('accountData').innerHTML = "<p>Please log in first.</p>";
    } else {
      fetch('/api/user/account', {
        method: 'GET',
        headers: {
          'Authorization': `Bearer ${token}`
        }
      })
      .then(res => res.json())
      .then(data => {
        // Render account info
        const container = document.getElementById('accountData');
        container.innerHTML = `
          <div class="field"><span class="label">Full Name:</span> ${data.fullName}</div>
          <div class="field"><span class="label">Email:</span> ${data.email}</div>
          <div class="field"><span class="label">Phone:</span> ${data.phone}</div>
          <div class="field"><span class="label">Bank Name:</span> ${data.bankName}</div>
          <div class="field"><span class="label">Account Type:</span> ${data.accountType}</div>
          <div class="field"><span class="label">Account Number:</span> ${data.accountNumber}</div>
          <div class="field"><span class="label">Routing Number:</span> ${data.routingNumber}</div>
          <div class="field"><span class="label">Balance:</span> $${data.balance}</div>
          <div class="field"><span class="label">Available Balance:</span> $${data.availableBalance}</div>
          <div class="field"><span class="label">KYC Status:</span> ${data.kycStatus}</div>
          <div class="field"><span class="label">Account Status:</span> ${data.accountStatus}</div>
        `;
      })
      .catch(err => {
        document.getElementById('accountData').innerHTML = "<p>Error loading account data.</p>";
        console.error(err);
      });
    }
  </script>
</body>
</html>
